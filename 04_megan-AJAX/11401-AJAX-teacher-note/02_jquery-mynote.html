<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>jQuery</title>
    <link rel="shortcut icon" href="#" type="image/x-icon" />
    <link rel="stylesheet" href="style.css" />
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <style>
      ul li {
        width: 80%;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #ccc;
        box-shadow: 1px 1px 10px #aaa;
        margin: 10px;
      }
      ul li:hover {
        width: 81%;
        background-color: lightgreen;
      }
    </style>
  </head>
  <body>
    <h1 class="header">jQuery</h1>
    <div class="title"></div>
    <h4></h4>
    <ul></ul>
  </body>
</html>
<script>
  // 參考講義 [javascript] Lesson 1 AJAX技術介紹
  // https://mackliu.github.io/php-book/2021/09/21/javascript-lesson-01/


    /********************************************************
     * 1.api網址  https://kktix.com/events.json
     * 2.選擇$.ajax()、$.get()、$.post()其中一種方式
     * 3.建立回呼函式(call back function)來處理回應時的各項行為
     * 4.建立錯誤處理
     ********************************************************/

    //利用$.ajax()方法傳送請求並取得回應
    /*     $.ajax(
        {
          url:'https://kktix.com/events.json',
          type:'get',
          success:(res)=>{
            console.log(res)
            let events=res.entry
            let li="";
            console.log(events);
            events.forEach((event ,idx)=> {
             let  li="<li>"+event.title+"</li>";
              $("ul").append(li);
          });
          //console.log(li)

            $(".title").html(res.title)
           },


        }
      )    */

//利用$.get()方法傳送請求並取得回應
// $.get()方法是jQuery提供的簡化版AJAX方法
/*

  $.get("url", data, function (data, textStatus, jqXHR) {}, "dataType");
  $.post(url, data, callback)
        url:  要發送請求的網址
        data: 要傳送的資料（可以是物件{ }、字串等）
        callback: 請求完成後要執行的函數
  例如 $.post("./api/del.php",{table:'Movie',id},()=>{ location.reload(); })

  */


    $.get("https://kktix.com/events.json", function (res) {
      //console.log(res)
      let events = res.entry;
      let li = "";

      //console.log(events);
      events.forEach((event, idx) => {
        let li = "<li>" + event.title + "</li>";
        $("ul").append(li);
      });
      //console.log(li)

      $(".title").html(res.title);
    });
</script>
